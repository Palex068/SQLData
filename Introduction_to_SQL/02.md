# 2. SQL. Определение данных

В данном модуле изучим типы данных, используемые в MySQL и правила их преобразования. Научимся как создавать и изменять основные виды объектов.

## Содержание

+ [2.1 Символьные и бинарные типы данных](#21-символьные-и-бинарные-типы-данных)
+ [2.2 Числовые типы данных](#22-числовые-типы-данных)
+ [2.3 Дата/время](#23-датавремя)
+ [2.4 Создание таблиц](#24-создание-таблиц)
+ [2.5 Правила целостности](#25-правила-целостности)
+ [2.6 Еще про таблицы](#26-еще-про-таблицы)

[Оглавление](/Introduction_to_SQL/README.MD)

# 2.1 Символьные и бинарные типы данных

В предыдущем модуле мы обсуждали, что для реляционной БД характерно хранение данных в таблицах, в столбцах которых хранится информация определенного типа данных. Например, при создании таблицы "Поставщики" указываем, что в столбце "Идентификатор" хранятся только числа. В случае, если пользователь начнет туда вносить текст, то СУБД нам выдаст ошибку. 

![02](/Introduction_to_SQL/img/01_02.png)

На следующих шагах разберем основные символьные типы данных, которые можно указывать при создании объектов в СУБД MySQL.

## CHAR(<количество символов>)

`<количество символов>` - может быть любым значением от 0 до 255.

В столбцах с типом `CHAR` могут храниться строки фиксированной длины, которая дополняется пробелами до максимальной длины. Тип `CHAR` может хранить до 255 байт.

Например, столбец Наименование в таблице Поставщики объявили с типом данных `char(12)`, это означает , что поле будет всегда содержать 12 символов информации, вне зависимости от длины текста.

Столбец с типом `char(12)`, содержащий слово Привет, занимает объем памяти, как на картинке:

![02](/Introduction_to_SQL/img/02_01.png)

## VARCHAR(<количество символов>)

`<количество символов>` - может быть любым значением от 0 до 65535.

В столбцах с типом `VARCHAR` могут храниться строки переменной длины, отличающиеся от типа `CHAR` тем, что не дополняется пробелами до максимальной длины. Максимальный размер до 65535 байт.

Например, столбец Наименование в таблице Поставщики объявили с типом данных `varchar(12)`, это означает , что поле будет содержать максимум 12 символов информации.

В отличие от `CHAR`, значения `VARCHAR` cохранены как 1 или 2-байтовая приставка длины плюс данные. Приставка длины указывает на число байтов в значении. Столбец использует длину в один байт, если значения требуют не больше, чем 255 байтов, и два байта, если значения могут потребовать больше 255 байтов.

Столбец с типом `varchar(12)`, содержащий слово Привет, занимает объем памяти, как на картинке:

![02](/Introduction_to_SQL/img/02_02.png)

Начиная с MySQL 5.6 типы `CHAR` и `VARCHAR` по умолчанию используют кодировку `UTF-8`, которая позволяет использовать до 3 байт для хранения символа в зависимости от языка ( для многих европейских языков по 1 байту на символ, для ряда восточно-европейских и ближневосточных - 2 байта, а для китайского, японского, корейского - по 3 байта на символ).

## Типы BINARY(<количество байт>) и VARBINARY(<количество байт>)

Типы данных `BINARY` и `VARBINARY` аналогичны `VARCHAR` и `CHAR`, только они хранят двоичные строки. 

Тип `BINARY`  с фиксированной длиной, строки дополняются нулевым байтом до максимальной длины. При записи строки "sql" в столбец с типом `BINARY`, храниться он будет в следующем виде:

![02](/Introduction_to_SQL/img/02_03.png)

`VARBINARY` хранит строки переменной длины, поэтому дополняться нулевыми байтами не будет.

## BLOB и TEXT

`BLOB` используется для хранения больших бинарных данных, таких как картинки. `TEXT` предназначен также для хранения больших данных, но текстового содержания.

Есть четыре типа `BLOB`:
+ `TINYBLOB`,
+ `BLOB`,
+ `MEDIUMBLOB` и
+ `LONGBLOB`. 

Они отличаются только по максимальной длине значений, которые они могут содержать. Им соответствуют четыре типа `TEXT`:
+ `TINYTEXT`,
+ `TEXT`,
+ `MEDIUMTEXT` и
+ `LONGTEXT`. 

Максимальный объем памяти для данных типов представлен в таблице ниже.

![02](/Introduction_to_SQL/img/02_04.png)

К строковым типам также относятся типы `ENUM` и `SET`, но в рамках данного курса ограничимся определением:

`ENUM` строковый объект со значением, выбранным из списка разрешенных значений, которые перечислены явно в спецификации столбца при создании таблицы.

`SET` строковый объект, у которого может быть ноль или больше значений, каждое из которых должно быть выбрано из списка разрешенных значений, определенных, когда таблица составлена. 

<hr>

[Содержание](#содержание)

# 2.2 Числовые типы данных

MySQL поддерживает следующие категории типов данных:
1. Типы с фиксированной точкой (`DECIMAL`)
2. Типы с плавающей точкой (`FLOAT`)
3. Целочисленные типы (`INT`)
4. Тип битового значения (`BIT`)

## Типы с фиксированной точкой

`DECIMAL(<precision>, <scale>)` Число с фиксированной точкой.
+ `<precision>` - точность, общее количество разрядов. Если точность не указана, то по умолчанию это будет 10. Максимальное значение - 65.
+ `<scale>` - масштаб, количество разрядов справа от десятичной точки. Значение по умолчанию для масштаба равно 0. 

Данный тип также имеет псевдонимы `NUMERIC`, `DEC`, `FIXED`.

На рисунке ниже изображено определение масштаба и точности:

![02](/Introduction_to_SQL/img/02_05.png)

Проиллюстрируем на примере -  какие данные можно хранить в столбцах с типом `decimal`:

![02](/Introduction_to_SQL/img/02_06.png)

**Столбец с типом decimal(5,2) может содержать значения от -999.99 до 999.99**

![02](/Introduction_to_SQL/img/02_07.png)

## Типы с плавающей точкой

`FLOAT`
Хранит дробные числа с плавающей точкой одинарной точности от  
$−3.4028 \cdot 10^{38}$ до $3.4028 \cdot 10^{38}$
, занимает 4 байта. Может принимать форму `FLOAT(M,D)`, где
+ `M` - общее количество цифр, а 
+ `D` - количество цифр после запятой.

`DOUBLE`
Хранит дробные числа с плавающей точкой двойной точности от
$−1.7976 \cdot 10^{308}$ до $1.7976 \cdot 10^{308}$
, занимает 8 байт. Также может принимать форму `DOUBLE(M,D)`, где
+ `M` - общее количество цифр, а
+ `D` - количество цифр после запятой.

Данный тип также имеет псевдонимы `REAL` и `DOUBLE PRECISION`, которые можно использовать вместо `DOUBLE`.
<hr>

## Целочисленные типы

MySQL поддерживает стандартные типы целого числа `INTEGER` (или `INT`) и `SMALLINT`. Как расширение к стандарту, MySQL также поддерживает типы целого числа `TINYINT`, `MEDIUMINT` и `BIGINT`. Следующая таблица показывает необходимое место для хранения и диапазон для каждого типа целого числа.

![02](/Introduction_to_SQL/img/02_08.png)

## Тип битового значения

`BIT(<количество бит>)`
Хранит последовательность битов заданной длины.
+ `<количество бит>` - может принимать значения от 1 до 64, по умолчанию - 8 бит.

Если назначаемое значение в колонке с данным типом использует меньше `M` бит, то происходит дополнение нулями слева. Например, при попытке записать значение b'101' в BIT(6) храниться в итоге будет b'000101'.

[Содержание](#содержание)

# 2.3 Дата/время

MySQL для столбцов, в которых хранятся Дата/время используют следующие типы данных:

<hr>

[Содержание](#содержание)

# 2.4 Создание таблиц

<hr>

[Содержание](#содержание)

# 2.5 Правила целостности

<hr>

[Содержание](#содержание)

# 2.6 Еще про таблицы

<hr>

[Содержание](#содержание)
