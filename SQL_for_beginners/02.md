# 2. Введение в базы данных и СУБД

## Содержание

+ [2.1 Базы данных](#21-базы-данных)
    + [Базы данных](#базы-данных)
    + [Возможности баз данных](#возможности-баз-данных)
    + [Развитие баз данных](#развитие-баз-данных)
+ [2.2 Реляционные базы данных](#22-реляционные-базы-данных)
+ [2.3 Нормальные формы](#23-нормальные-формы)
    + [Нормализация данных](#модель-ключ--значение)
    + [Нормальные формы](#нормальные-формы)
    + [Первая нормальная форма](#первая-нормальная-форма)
    + [Вторая нормальная форма](#вторая-нормальная-форма)
    + [Третья нормальная форма](#третья-нормальная-форма)
+ [2.4 СУБД и язык SQL](#24-субд-и-язык-sql)
    + [СУБД](#субд)
    + [Типы СУБД](#типы-субд)
    + [Язык SQL](#язык-sql)
    + [Популярные реляционные СУБД](#популярные-реляционные-субд)
    + [Группы операторов SQL](#группы-операторов-sql)

[Оглавление](/SQL_for_beginners/README.MD)

# 2.1 Базы данных

## Базы данных

В самом широком определении базой данных является любой набор взаимосвязанной информации. Когда мы пишем список покупок на листе бумаги, мы создаем небольшой аналог базы данных. В контексте информатики **база данных** — это организованная и определенным образом структурированная коллекция данных. Она служит основой для различных приложений и систем, обеспечивая эффективное хранение, управление и обработку большого количества информации.

**Данные** — это любая собранная и сохраненная информация об отдельной сущности (человеке, месте, предмете или любом другом объекте реального мира). К данным также относятся и атрибуты (свойства) этой сущности.

В настоящее время базы данных играют важную роль в эффективном управлении информацией и являются неотъемлемой частью любой современной отрасли:

+ **Бизнес.** В современном бизнесе базы данных используются для хранения информации о клиентах, продажах и других важных аспектах операций компании. Например, базы данных позволяют бизнесу хранить данные о предпочтениях своих клиентов, что помогает в персонализации обслуживания и разработке маркетинговых стратегий.
+ **Медицина.** В медицинских учреждениях базы данных используются для хранения данных о пациентах: историй болезни, результатов анализов и другой информации. Это позволяет врачам и медицинскому персоналу иметь доступ к актуальным данным о пациентах и принимать обоснованные решения в ходе лечения.
+ **Финансы.** Банки и другие финансовые учреждения используют базы данных для учета и обработки финансовых операций. Например, банковская база данных может хранить информацию о клиентах, их банковских счетах, транзакциях и кредитных историях. Это позволяет банкам эффективно управлять финансами, обрабатывать платежи, выдавать кредиты и предоставлять клиентам отчетность.

<hr>

[Содержание](#содержание)

## Возможности баз данных

Современные базы данных обладают широкими возможностями в вопросах управления информацией, обеспечивая эффективное хранение данных, их систематизацию и доступ к ним:
+ **Хранение и организация больших объемов данных.** Базы данных позволяют хранить огромное количество информации, обеспечивая эффективное использование ресурсов хранения.
+ **Систематизация и структурирование данных.** Базы данных позволяют организовывать данные в согласованную структуру, определяя типы хранимых данных, связи между ними и различные правила целостности.
+ **Обеспечение доступа к данным.** Базы данных поддерживают специальные языки запросов для быстрого и удобного доступа к данным.

<hr>

[Содержание](#содержание)

## Развитие баз данных

В начале развития баз данных информация хранилась в простых форматах, таких как плоские файлы. Это обыкновенные текстовые файлы, в которых данные хранятся в виде записей без какой-либо организации или структуры. Плоские файлы просты в использовании, но не предоставляют механизмов для связи или структурирования данных, что затрудняет эффективный доступ к информации.

Плоские файлы и по сей день повсеместно используются для хранения различной информации. Примером могут служить файлы [формата CSV.](https://ru.wikipedia.org/wiki/CSV)

<hr>

[Содержание](#содержание)

### Иерархическая модель

В 1960-х годах была разработана **иерархическая модель** баз данных, которая используется для организации данных с иерархической структурой. В ней данные представляются в виде древовидной структуры, где каждая запись имеет родительскую запись, кроме верхнего уровня. Это позволяет эффективно организовывать данные с иерархическими связями, но требует заранее определенной структуры данных.

![01](/SQL_for_beginners/img/01_01.avif)

Основным недостатком иерархической модели данных является ее неуниверсальность. Реальный мир не может быть легко представлен в виде древовидной структуры с одним корневым сегментом. Иерархическая модель применима, когда между объектами существуют реальные иерархические связи.

<hr>

[Содержание](#содержание)

### Сетевая модель

Сетевая модель баз данных была разработана в 1960 — 1970-х годах и представляет собой расширение иерархической модели. В этой модели данные представляются в виде сети, где каждая запись может быть связана с несколькими другими записями.

![01](/SQL_for_beginners/img/01_02.avif)

Сетевая модель универсальна и имеет гораздо большие возможности моделирования связей между объектами по сравнению с иерархической. Основным ее недостатком является сложность. В сетевых базах данных сложно проводить изменения структуры, так как приходится перестраивать множество различных связей. Сетевую модель трудно реализовывать, так как необходимо знать все связи между разнородными объектами.

Сетевая и иерархическая модели были разработаны в то время, когда главными требованиями к базам данных являлись эффективность использования памяти, а также быстрота выполнения поиска и других операций над данными.

<hr>

[Содержание](#содержание)

### Реляционная модель

**Реляционная модель**, которая стала широко распространена в 1970-х годах, до сих пор остается основной и наиболее используемой. Она была разработана для управления структурированными данными с использованием табличной модели. Основная цель реляционных баз данных — обеспечить надежное хранение, организацию и доступ к данным в структурированной форме.

Реляционные базы данных организованы в виде набора связанных таблиц. Каждый столбец таблицы имеет имя и определенный тип (текст, число, дата). Каждая строка таблицы представляет собой набор связанных значений, относящихся к одной сущности. Помимо этого, каждая строка помечается уникальным идентификатором, а строки из нескольких таблиц могут быть связаны между собой с помощью этих идентификаторов.

![02](/SQL_for_beginners/img/01_03.webp)

Гибкость реляционных баз данных объясняется тем, что таблицы, хранящие данные, в значительной степени независимы друг от друга. Можно добавлять данные в таблицу, удалять их из нее, вносить в них изменения, при этом не затрагивая данные из других таблиц.

<hr>

[Содержание](#содержание)

### Модель ключ — значение

В начале 2000-х годов была создана модель ключ — значение, более известная сегодня как хеш-таблица. В базах данных этого типа данные хранятся в виде пар ключ — значение. Каждому значению сопоставляется уникальный ключ, по которому оно может быть получено или обновлено.

![02](/SQL_for_beginners/img/01_04.avif)

Базы данных вида **ключ — значение** обеспечивают быстрый доступ к данным и простую структуру хранения. Модель ключ — значение часто используется для хранения и обработки данных, где производительность и масштабируемость являются приоритетом: например, для [кеширования данных](https://ru.wikipedia.org/wiki/Кэш). Она не очень подходит для сложной обработки или анализа данных, но годится для приложений, где важен быстрый доступ к информации.

Нередко модели баз данных, которые не используют табличные схемы строк и столбцов, называют нереляционными.

<hr>

[Содержание](#содержание)

### Документная модель

Документная или документоориентированная модель появилась в начале 2000-х годов как ответ на требования таких областей, как веб-разработка и социальные сети, которые нуждаются в высокой масштабируемости и гибкости при работе с неструктурированными данными. Основная идея этой модели заключается в хранении данных в виде документов, которые обычно представлены файлами в форматах вроде JSON или XML. Каждый документ представляет собой самодостаточную единицу данных, содержащую полную информацию о своей сущности. Документы могут иметь различную структуру в зависимости от требований.

![02](/SQL_for_beginners/img/01_05.png)

Организация документных баз данных основывается на коллекциях или контейнерах, в которых хранятся документы. Коллекции могут содержать произвольное количество документов, и каждый документ может быть проиндексирован или иметь уникальный идентификатор для быстрого доступа к нему.

![02](/SQL_for_beginners/img/01_06.webp)

Документные базы данных эффективны для хранения каталожной информации. Например, в интернет-магазинах разные товары обычно имеют различное количество параметров. При использовании документной базы данных параметры каждого товара можно описать в одном документе. Изменение параметров одного товара не повлияет на другие товары.

<hr>

[Содержание](#содержание)

### Примечания 1

**Примечание 1.** Одними из самых ранних носителей информации были [магнитные ленты](https://ru.wikipedia.org/wiki/Магнитная_лента). Они представляли собой длинные полосы с магнитным покрытием, на которые информацию можно было записывать и считывать с помощью магнитной головки. Несмотря на появление более современных носителей информации, магнитные ленты порой используются и сегодня: например, компаниями, которым необходимо обрабатывать и архивировать большое количество данных. Ленты хранят резервные копии данных и другую редко используемую информацию. К примеру, в 2011 году баг в системе привел к удалению писем пользователей Gmail. Тогда компания Google восстановила данные именно с магнитных лент.

![02](/SQL_for_beginners/img/01_07.png)

**Примечание 2.** На сегодняшний день существует огромное количество разновидностей баз данных, различающихся по множеству критериев. Помимо рассмотренных в уроке видов, также бывают графовые, колоночные, объектно-ориентированные и другие модели баз данных.

<hr>

[Содержание](#содержание)

# 2.2 Реляционные базы данных

Среди всех существующих моделей баз данных доминирующей на сегодняшний день является реляционная модель. Она была разработана в 1970 году **Эдгаром Коддом**, специалистом в области математики и информатики.

Эдгар Кодд за свой вклад в теорию баз данных был награжден многими престижными наградами, включая [премию Тьюринга](https://ru.wikipedia.org/wiki/Премия_Тьюринга) в 1981 году.

Реляционная модель представляет собой совокупность данных, состоящую из набора **таблиц**. В теории множеств, которая легла в основу этой модели, таблице соответствует термин **отношение** (relation), а таблица является его физическим представлением. Отсюда и название модели — реляционная.

Любая таблица в реляционной базе данных состоит из строк, которые называют **записями**, и столбцов, которые называют **полями**. На пересечении строк и столбцов находятся конкретные значения. Запись представляет собой набор значений, содержащий информацию о конкретной сущности, полем же является отдельная характеристика сущности.

Например, в таблице ниже содержатся 3 записи, 4 поля и 12 значений:


ID | Имя | Фамилия | Дата рождения
-|-|-|-
1 | Билл | Гейтс | 28.10.1955
2 | Алан | Тьюринг | 23.06.1912
3 | Эдгар | Кодд | 19.08.1923

Таблица в реляционной базе данных обладает рядом свойств, отличающих ее от обычных таблиц. Например, каждое поле таблицы всегда имеет уникальное имя и тип данных, хранимых в этом поле. Если поле используется для хранения имени, то его тип будет строковым, а если для хранения возраста — числовым. Так как таблица в базе данных зачастую не одна, каждая из них обладает уникальным именем, идентифицирующим ее, и никакая другая таблица в базе данных не может носить то же самое имя.

Поле (или несколько полей), значения которого однозначно определяют записи таблицы, называется **первичным ключом**. То есть **первичный ключ** — это такое поле, значения которого в таблице не повторяются. Так, в таблице выше с полями ID, Имя, Фамилия и Дата рождения в качестве первичного ключа выступает поле ID, представляющее уникальный идентификатор определенного человека. В качестве первичного ключа также можно было бы выбрать сочетание полей Имя и Фамилия, однако у людей могут быть одинаковые имена и фамилии, поэтому для однозначности в таблицу было включено поле ID.

Первичный ключ, состоящий из одного поля, обычно называют **простым**. Если же первичный ключ включает несколько полей, его называют **составным**.

Таблица может содержать информацию, используемую для связи с другой таблицей. Осуществляется такая навигация с помощью **внешних ключей**. Для понимания принципа их работы добавим к рассмотрению еще одну таблицу, содержащую информацию о странах:

Код страны | Страна | Столица
-|-|-
840 | США | Вашингтон
826 | Великобритания | Лондон

Отметим, что первичным ключом в этой таблице является первое поле с кодом страны.

Расширим также таблицу, предложенную в начале урока — добавим в нее поле с кодом страны рождения, а в качестве значений этого поля воспользуемся значениями первичного ключа таблицы с данными о странах:

ID | Имя | Фамилия | Дата рождения | Код страны рождения
-|-|-|-|-
1 | Билл | Гейтс | 28.10.1955 | 840
2 | Алан | Тьюринг | 23.06.1912 | 826
3 | Эдгар | Кодд | 19.08.1923 | 826

Во второй таблице поле `Код страны рождения` представляет собой внешний ключ. То есть внешний ключ — это поле в одной таблице, которое связывается с первичным ключом другой таблицы. Он задает связь между двумя таблицами, позволяя ссылаться на данные в одной таблице из другой таблицы. Аналогично первичному ключу, внешний ключ может состоять как из одного, так и из нескольких полей.

Таблица, которая ссылается на данные из другой таблицы, называется **дочерней**. Таблица, на данные которой ссылается другая таблица, называется **родительской**.

На первый взгляд может быть непонятно, как использовать полученные таблицы для поиска нужной информации: например, столицы страны, в которой родился Эдгар Кодд. Для этого сначала необходимо в первой таблице найти запись с данными Эдгара и узнать код страны его рождения. Затем, используя полученный код, мы найдем запись с данными о стране во второй таблице и получим искомую столицу.

Таким образом, с помощью первичных и внешних ключей устанавливаются связи между таблицами. Группа связанных таблиц называется схемой данных. Зачастую она изображается в виде таблиц, соединенных линиями или стрелками, которые и показывают имеющиеся между таблицами связи. Например, для рассмотренных выше таблиц схема будет иметь следующий вид:

![02](/SQL_for_beginners/img/01_08.svg)

Обратите внимание, что в схеме каждая таблица не представлена вместе со всем содержимым: в ней указаны лишь ее имя и соответствующий набор полей.

### Примечания 2

**Примечание 1.** Первичные ключи не являются обязательными, однако большинство разработчиков баз данных создают их для каждой таблицы, чтобы в будущем иметь возможность выполнять любые манипуляции с данными.

**Примечание 2.** Для реляционной модели имеется развитый математический аппарат — реляционная алгебра. В ней определяются различные операции над таблицами: например, объединение или декартово произведение. В реляционной алгебре поле называется **атрибутом**, а запись — **кортежем**. Также для каждого поля определяется множество всех возможных значений, называемое **доменом**.

<hr>

[Содержание](#содержание)

# 2.3 Нормальные формы

Урок посвящен нормализации данных и нормальным формам в реляционных базах данных.

## Нормализация данных

**Нормализация** — это процесс организации данных в реляционной базе данных в соответствии с определенными правилами, которые делают базу данных более гибкой, устраняя избыточность данных и потенциальные ошибки.

Избыточность данных означает наличие повторяющейся или лишней информации в различных частях базы данных. Она приводит к непродуктивному расходованию ресурсов хранилища и затрудняет обслуживание базы данных. Так, в таблице ниже содержится избыточная информация:

ID | Имя | Фамилия | Предмет
-|-|-|-
1 | Билл | Гейтс | Информатика
2 | Алан | Тьюринг | Информатика
3 | Эдгар | Кодд | Математика

Если, например, название предмета **Информатика** изменится на **Компьютерные науки**, то его нужно будет заменить во всех записях о тех студентах, которые изучают данный предмет. Потенциальная же ошибка может заключаться, например, в потере информации. Если Эдгар решит больше не изучать математику, то придется удалить запись со сведениями о нем, и тогда информация о данном предмете будет полностью потеряна.

Ошибки, которые могут возникнуть при работе с ненормализованной базой данных, называются аномалиями. Выделяют аномалии вставки, удаления и модификации, которые возникают при соответствующих операциях.

<hr>

[Содержание](#содержание)

## Нормальные формы

Существует несколько наборов правил нормализации баз данных. Каждый такой набор называется нормальной формой. Если базой данных соблюдается первый набор правил, то считается, что она находится в первой нормальной форме, если первые три набора правил — в третьей нормальной форме. Выражение "привести к нормальной форме" нередко применяется как к отдельной таблице, так и к базе данных в целом. Во втором случае понимается преобразование всех таблиц базы данных так, чтобы каждая из них удовлетворяла необходимым условиям.

Каждая следующая нормальная форма содержит более строгие правила и критерии. Приводя базу данных к определенной нормальной форме, мы устраняем определенный спектр проблем. Таким образом, процесс перехода от одной нормальной формы к следующей представляет собой усовершенствование базы данных. Если база данных находится в какой-либо нормальной форме, это означает, что она лишена определенного вида аномалий.

Приведение базы данных к какой-либо конкретной нормальной форме обязательно требует, чтобы эта база данных уже находилась в предыдущей нормальной форме.

Существует пять основных нормальных форм: первая, вторая, третья, четвертая и пятая нормальные формы. Иногда выделяют еще три дополнительные формы:
+ шестая нормальная форма
+ нормальная форма Бойса-Кодда
+ доменно-ключевая нормальная форма

База данных считается нормализованной, если она находится как минимум в третьей нормальной форме. Нормализация до третьей нормальной формы является стандартной практикой, так как она устраняет достаточное количество аномалий. Ситуации, при которых требуется нормализовать базу данных до четвертой нормальной формы, встречаются достаточно редко.

Все последующие нормальные формы относятся скорее к теоретическим нормальным формам, и на практике трудно представить ситуации, при которых потребуется нормализовать до них базу.

<hr>

[Содержание](#содержание)

## Первая нормальная форма

Первая нормальная форма является начальным уровнем нормализации данных. Она включает следующие правила:
+ в таблице не должно быть полей с одинаковым смыслом
+ в каждой ячейке таблицы должно находиться одиночное несоставное значение
+ таблица должна иметь первичный ключ

В качестве примера приведения к первой нормальной форме рассмотрим следующую таблицу:

ID | Имя | Фамилия | Первый предмет | Второй предмет
-|-|-|-|-
1 | Билл | Гейтс | Информатика | Маркетинг
2 | Алан | Тьюринг | Криптография | Математика
3 | Эдгар | Кодд | Информатика | Математика

Данная таблица не соответствует первой нормальной форме, так как содержит поля с одинаковым смыслом: Первый предмет и Второй предмет. В подобных таблицах сложно обеспечивать согласованность данных. Например, если появится студент, изучающий три или четыре предмета, придется целиком изменять структуру таблицы. Потенциальным решением проблемы может являться группировка схожих полей:

ID | Имя | Фамилия | Предметы
-|-|-|-
1 | Билл | Гейтс | Информатика, <br> Маркетинг
2 | Алан | Тьюринг | Криптография, <br> Математика
3 | Эдгар | Кодд | Информатика, <br> Математика

Однако таблица по-прежнему не находится в первой нормальной форме, так как теперь некоторые ее ячейки содержат составные значения. Решением может быть дублирование записей таким образом, чтобы каждое составное значение стало одиночным:

ID | Имя | Фамилия | Предмет
-|-|-|-
1 | Билл | Гейтс | Информатика
1 | Билл | Гейтс | Маркетинг
2 | Алан | Тьюринг | Криптография
2 | Алан | Тьюринг | Математика
3 | Эдгар | Кодд | Информатика
3 | Эдгар | Кодд | Математика

Теперь таблица находится в первой нормальной форме, так как
+ она не имеет схожих по смыслу полей,
+ в каждой ее ячейке находится одиночное значение,
+ а первичным ключом в ней является сочетание полей ID и Предмет. 

Несмотря на это, она подвержена аномалиям. В частности, в данную таблицу нельзя внести информацию о студенте, не указав хотя бы один изучаемый предмет, а также невозможно удалить информацию обо всех изучаемых студентом предметах, не удалив информацию о нем самом.

<hr>

[Содержание](#содержание)

## Вторая нормальная форма

Вторая нормальная форма является продолжением первой нормальной формы и включает следующие правила:
+ таблица должна находиться в первой нормальной форме
+ каждое неключевое поле таблицы должно зависеть только от полного первичного ключа, то есть от всех его полей

В качестве примера приведения ко второй нормальной форме рассмотрим предложенную ранее таблицу, которая уже находится в первой нормальной форме, однако для большей наглядности последующих рассуждений добавим в нее еще одно поле:

ID | Имя | Фамилия | Предмет | Оценка
-|-|-|-|-
1 | Билл | Гейтс | Информатика | 5
1 | Билл | Гейтс | Маркетинг | 4
2 | Алан | Тьюринг | Криптография | 5
2 | Алан | Тьюринг | Математика | 5
3 | Эдгар | Кодд | Информатика | 5
3 | Эдгар | Кодд | Математика | 5

Несложно показать, что данная таблица не находится во второй нормальной форме. Например, в ней существуют зависимость поля `Оценка` от полей `ID` и `Предмет` (оценка зависит от студента и предмета), а также зависимость полей `Имя` и `Фамилия` от поля `ID` (персональная информация студента зависит только от него самого). Таким образом, поля `Имя` и `Фамилия` зависят не от полного первичного ключа, а лишь от его части, так как первичным ключом является сочетание полей `ID` и `Предмет`, но при этом поле `Предмет` можно убрать без потери зависимости.

Чтобы привести данную таблицу ко второй нормальной форме, необходимо разбить ее на несколько таблиц с учетом всех неполных зависимостей. В нашем случае неполную зависимость образуют поля `Имя` и `Фамилия`, поэтому их следует вынести в отдельную таблицу:

ID | Имя | Фамилия
-|-|-
1 | Билл | Гейтс
2 | Алан | Тьюринг
3 | Эдгар | Кодд

Тогда исходная таблица примет следующий вид:

ID | Предмет | Оценка
-|-|-
1 | Информатика | 5
1 | Маркетинг | 4
2 | Криптография | 5
2 | Математика | 5
3 | Информатика | 5
3 | Математика | 5

Теперь мы имеем две таблицы, каждая из которых находится во второй нормальной форме. Также можно заметить, что после этого разбиения персональные данные студента и информация о его успеваемости стали независимыми. Это значит, что больше нет части аномалий, свойственных первой нормальной форме: *вставка и удаление данных не затрагивают информацию, не связанную с ними напрямую*.

Процесс разбиения одной большой таблицы на несколько меньших таблиц называется декомпозицией.

<hr>

[Содержание](#содержание)

## Третья нормальная форма

Третья нормальная форма исправляет оставшиеся после приведения ко второй нормальной форме аномалии и включает следующие правила: 
+ таблица должна находиться во второй нормальной форме
+ каждое неключевое поле таблицы должно зависеть только от первичного ключа и ни от какого другого неключевого поля

Другими словами, третья нормальная форма говорит о том, что неключевые поля не должны вести себя как первичные ключи. Они не должны давать возможности получить данные из других полей, так как их задачей является лишь предоставление той информации, которая находится в них самих.

В качестве примера приведения к третьей нормальной форме рассмотрим следующую таблицу, которая уже находится во второй нормальной форме:

ID | Имя | Фамилия | Должность | Зарплата
-|-|-|-|-
1 | Билл | Гейтс | Программист | 120 000
2 | Алан | Тьюринг | Криптограф | 100 000
3 | Эдгар | Кодд | Программист | 120 000

Данная таблица содержит список сотрудников с указанием их должностей и размеров заработной платы. Первичным ключом в ней является поле `ID`. При этом известно, что размер заработной платы сотрудника полностью определяется занимаемой должностью. Следовательно, существует зависимость поля `Зарплата` от поля `Должность`, что делает таблицу не соответствующей требованиям третьей нормальной формы, и в ней есть аномалии модификации. Например, если Алан решит стать программистом, его зарплата все равно останется на прежнем уровне.

Таблица во второй нормальной форме приводится к третьей способом, похожим на то, как первая нормальная форма приводится ко второй — путем декомпозиции с учетом всех неудовлетворяющих зависимостей. В нашем случае неудовлетворяющую зависимость образует поле `Зарплата`, поэтому его следует вынести в отдельную таблицу:

Код должности | Должность | Зарплата
-|-|-
1 | Программист | 120 000
2 | Криптограф | 100 000

Тогда исходная таблица примет следующий вид:

ID | Имя | Фамилия | Код занимаемой должности
-|-|-|-
1 | Билл | Гейтс | 1
2 | Алан | Тьюринг | 2
3 | Эдгар | Кодд | 1

Теперь мы имеем две таблицы, каждая из которых находится в третьей нормальной форме. Благодаря этому аномалия модификации больше не проявляется, и любой сотрудник после смены должности автоматически получит корректное изменение заработной платы.

Также следует заметить, что в таблице с информацией о должностях каждой должности был присвоен уникальный код, который используется в таблице с работниками для указания занимаемой должности. Теперь если мы решим переименовать должность `Программист` в `Разработчик`, это нужно будет сделать лишь единожды, а не изменять должность каждого работника, являющегося программистом.

Приводить базу данных к третьей нормальной форме для устранения всех зависимостей не всегда практично. Значительное увеличение числа маленьких таблиц может привести к снижению производительности при работе с базой данных.

<hr>

[Содержание](#содержание)

## Примечания 3

**Примечание 1.** Нормализация предназначена для приведения структуры базы данных к виду, обеспечивающему минимальную логическую избыточность, и не имеет целью уменьшение или увеличение производительности работы или же уменьшение или увеличение физического объема базы данных.

**Примечание 2.** Если в таблице имеется только один потенциальный первичный ключ и он состоит только из одного поля, то соответствие таблицы первой нормальной форме автоматически делает таблицу соответствующей второй нормальной форме.

**Примечание 3.** Помимо нормализации, существует процесс, называемый **денормализацией**. Денормализация заключается в намеренном приведении структуры базы данных в состояние, не соответствующее определенным нормальным формам. Обычно денормализация используется с целью ускорения операций чтения из базы данных за счет добавления избыточных данных.

**Примечание 4.** Дополнительно о каждой нормальной форме и примерах приведения к ним можно почитать по [ссылке](https://ru.wikipedia.org/wiki/Нормальная_форма).

<hr>

[Содержание](#содержание)

# 2.4 СУБД и язык SQL

Урок посвящен СУБД, реляционным СУБД и языку SQL.

## СУБД

**База данных** — это организованная и определенным образом структурированная коллекция данных. Однако несмотря на наличие структуры, база данных представляет собой всего лишь набор информации, находящийся на физическом носителе. База данных не предлагает никакого инструментария для работы с ней, поэтому для этих целей были разработаны **СУБД**.

**СУБД (система управления базами данных)** — это комплексное программное обеспечение, которое служит интерфейсом между базой данных и разработчиком, конечным пользователем или программой, предоставляя им возможность удобно взаимодействовать с базой данных и выполнять с ней все необходимые действия.

![02](/SQL_for_beginners/img/01_09.webp)

Главное назначение СУБД — управление базой данных. Помимо возможности извлекать, добавлять, изменять и удалять данные, современные СУБД предлагают возможность выполнять резервное копирование данных, а также восстанавливать утерянные данные после непредвиденных сбоев.

В число возможностей СУБД также входит поддержка многопользовательской работы, что обеспечивает согласованный доступ к базе данных множеству пользователей. Помимо этого, СУБД предоставляют механизмы для защиты данных, включая аутентификацию, авторизацию и шифрование.

Многие СУБД предоставляют инструменты для анализа и визуализации данных, что позволяет пользователям извлекать ценную информацию из больших объемов данных.

Для работы с базой данных посредством СУБД используются определенные языки программирования. Разработчик, следуя синтаксису языка, пишет программный код и выполняет с базой данных то, что ему необходимо. Это может быть добавление в таблицу базы данных новой записи или извлечение записей из таблицы с дополнительной фильтрацией и сортировкой. Каждое подобное обращение к базе данных называется **запросом**.

![02](/SQL_for_beginners/img/01_10.avif)

Взаимодействие конечного пользователя с базой данных также происходит при помощи запросов. Например, когда пользователь нажимает на кнопку на сайте интернет-магазина, чтобы перейти к товару и прочесть его описание, сайт составляет запрос к базе данных и отправляет его СУБД. Она обрабатывает его и ищет в базе данных запрашиваемую информацию, а затем возвращает обратно сайту, который конвертирует их в читаемый вид и предоставляет пользователю.

Языки программирования, используемые СУБД для работы с базами данных, часто называют **языками запросов**.

<hr>

[Содержание](#содержание)

## Типы СУБД

На сегодняшний день существует немалое количество различных СУБД, каждая из них обладает рядом отличительных характеристик. Обычно СУБД классифицируют по расположению базы данных, способу обработки данных, выбранной модели хранения данных и используемому языку запросов.

### Расположение базы данных

В зависимости от расположения базы данных СУБД разделяют на локальные и распределенные. Локальные СУБД хранят базу данных на одном сервере (или устройстве), в то время как в распределенных СУБД данные хранятся на нескольких серверах, которые физически могут находиться в разных местах.

Многие современные СУБД поддерживают как локальное, так и распределенное применение или позволяют подключить дополнительные модули для распределенного доступа.

### Хранение и обработка данных

По способу хранения и обработки данных СУБД делятся на
+ клиент-серверные,
+ файл-серверные и
+ встраиваемые. 

Клиент-серверный тип предполагает, что СУБД и база данных размещены на одном сервере, к которому обращаются с запросами разные пользователи. Получить доступ к данным, расположенным на сервере, можно с любого устройства, специальное ПО для этого не требуется.

Примером использования клиент-серверной СУБД может служить база данных интернет-магазина, ассортимент которого покупатели просматривают со своих смартфонов или компьютеров.

Идея файл-серверного типа заключается в том, что база данных хранится на одном файл-сервере, а СУБД — на каждом устройстве, с которого отправляются запросы к базе данных. Чтобы пользователь мог получить доступ к данным, у него на устройстве должна быть установлена и настроена СУБД.

Наконец, встраиваемые СУБД предназначены для того, чтобы полностью интегрировать их в приложения и использовать для хранения и управления данными только внутри этих приложений.

### Структура и организация данных

СУБД также классифицируются по моделям баз данных, на которых они основаны. Для любой модели, будь то иерархическая или сетевая, имеется соответствующая СУБД. Например, если СУБД использует для хранения данных реляционную модель, ее так и называют — реляционной.

### Используемый язык запросов

Чаще всего СУБД делятся на два типа в зависимости от языка программирования, который они используют: `SQL-ориентированные` и `NoSQL-ориентированные`. SQL-ориентированные СУБД для управления данными используют язык под названием SQL, в то время как NoSQL-ориентированные СУБД используют языки, отличные от SQL.

SQL является стандартным языком для всех реляционных СУБД, поэтому разделяя СУБД по языку, который они используют, мы фактически разделяем их на реляционные и нереляционные.

NoSQL-ориентированные СУБД чаще используются там, где нужно работать с большим объемом информации или с данными, имеющими сложную связную структуру.

<hr>

[Содержание](#содержание)

### Язык SQL

Реляционные СУБД — одни из самых распространенных систем. Как уже было сказано ранее, для управления данными они используют язык программирования под названием **SQL (Structured Query Language, язык структурированных запросов)**, который был специально разработан для работы с базами данных, принадлежащими реляционной модели.

SQL является слабоструктурированным языком, особенно по сравнению с такими высокоструктурированными языками, как Python, C или Java. SQL-запросы напоминают обычные предложения английского языка и содержат слова-пустышки, не влияющие на функциональную часть запроса, но облегчающие его чтение.

Например, SQL-запрос, направленный на извлечение информации из базы данных, может выглядеть следующим образом:

```sql
SELECT title
FROM Movies
WHERE rating BETWEEN 7 AND 9
```

SQL является декларативным языком, то есть с помощью SQL программист описывает только то, какие данные нужно извлечь или модифицировать. Каким образом это сделать, решает СУБД непосредственно при обработке SQL-запроса. Однако не стоит думать, что это полностью универсальный принцип — программист описывает набор данных для выборки или модификации, однако при этом ему полезно представлять, как СУБД будет разбирать текст его запроса. Чем сложнее сконструирован запрос, тем больше он допускает вариантов написания, различных по скорости выполнения, но одинаковых по итоговому набору данных.

SQL — это способ формулировки запросов к базе данных, а СУБД обеспечивает выполнение этих запросов и управление физическими данными в базе.

<hr>

[Содержание](#содержание)

## Популярные реляционные СУБД

Существует множество реляционных систем управления базами данных, но некоторые из них являются наиболее популярными и широко используемыми.

### PostgreSQL

**PostgreSQL** — клиент-серверная реляционная СУБД, которая обладает значительной функциональностью и производительностью, при этом доступна бесплатно. Она также подходит для масштабных проектов с большими массивами данных и высокой нагрузкой.

В качестве основного языка запросов используется SQL, но СУБД также поддерживает его расширения на базе языков программирования: PL/Perl, PL/Python и PL/Java. Одно из главных преимуществ PostgreSQL в том, что у нее нет ограничений по размеру баз данных и числу записей в таблицах.

### MySQL

**MySQL** — клиент-серверная реляционная СУБД, которая хорошо подходит для средних и небольших проектов и команд. Она обладает интуитивно понятным интерфейсом и доступна для свободного использования, поддерживает разнообразные форматы таблиц и постоянно расширяет свои функциональные возможности.

Платформа Stepik в качестве учебной СУБД использует MySQL, поэтому наш курс посвящен именно ее изучению.

MySQL поддерживает различные операционные системы, такие как Windows, Linux и Unix, и обладает API для основных языков программирования, таких как C++, Python, Ruby и Java. MySQL демонстрирует высокую производительность при работе с небольшими и средними базами данных, что обусловлено ее внутренней структурой.

MySQL также гарантирует высокий уровень безопасности в хранении и передаче данных. Система предоставляет продвинутую систему управления правами доступа для различных пользователей, предлагает механизмы шифрования и верификации. Кроме того, для этой СУБД доступны различные плагины, повышающие уровень безопасности на серверной стороне и дополнительно обеспечивающие защиту данных.

Благодаря своей доступности, легкому внедрению и универсальности, MySQL остается одним из самых востребованных решений для управления базами данных. У этой системы развитое мировое сообщество, множество проектов реализованы с использованием MySQL, и специалисты, владеющие этой технологией, ценятся повсеместно.

### SQLite

**SQLite** — компактная СУБД, которая подходит для небольших проектов. Она состоит из одного файла и встраивается в IT-инфраструктуру в виде библиотеки, не задействуя серверы и специальные службы. Все базы данных хранятся на одном устройстве.

SQLite подходит для небольших сайтов и приложений с ограниченным трафиком и объемом данных, а также сервисов, где нужно прочитать или сохранить файлы на диск. СУБД работает на компьютерах, смартфонах, ТВ, приставках и беспилотниках, не требует администрирования и поддержки.

<hr>

[Содержание](#содержание)

## Примечания 4

**Примечание 1.** База данных и система управления базой данных — не одно и то же, и об этом всегда следует помнить. База данных — это структурированный набор данных. Система управления базами данных — это программное обеспечение, которое разработчики, конечные пользователи и программы используют для взаимодействия с базой данных.

**Примечание 2.** Несмотря на то что SQL является стандартным языком для всех реляционных СУБД, многие разработчики вносят изменения в язык SQL, применяемый в разрабатываемой СУБД, тем самым отступая от стандарта. Так появляются специфичные для каждой конкретной СУБД диалекты языка SQL.

Однако даже с учетом наличия диалектов и различий в синтаксисе тексты SQL-запросов в большинстве своем могут быть перенесены из одной СУБД в другую без особых сложностей. Существуют системы, разработчики которых изначально ориентировались на применение по меньшей мере нескольких СУБД. Естественно, при применении некоторых специфичных для реализации возможностей такой переносимости добиться уже очень трудно.

**Примечание 3.** Изначально языку SQL было дано имя Structured English Query Language, сокращенно SEQUEL. Однако в тот момент владельцем торговой марки SEQUEL была компания Hawker Siddeley Aircraft Company из Великобритании, так что название языка было сокращено до SQL, а слово English было удалено из названия (для соответствия названия аббревиатуре).

**Примечание 4.** С краткой историей создания языка SQL можно ознакомиться по [ссылке](https://ru.wikipedia.org/wiki/SQL#История).

<hr>

[Содержание](#содержание)

## Группы операторов SQL

С точки зрения реализации язык SQL представляет собой набор операторов, которые делятся на определенные группы, и у каждой группы есть свое назначение. В сокращенном виде эти группы называются **DDL**, **DML**, **DCL** и **TCL**.

Группы операторов SQL иногда называют **подмножествами SQL**.

### DDL – Data Definition Language

**Data Definition Language (DDL)** – это группа операторов определения данных. Другими словами, с помощью операторов, входящих в эту группу, мы определяем структуру базы данных и работаем с объектами этой базы, то есть создаем, изменяем и удаляем их.

В эту группу входят следующие операторы:
+ `CREATE` – используется для создания объектов базы данных
+ `ALTER` – используется для изменения объектов базы данных
+ `DROP` – используется для удаления объектов базы данных

### DML – Data Manipulation Language

**Data Manipulation Language (DML)** – это группа операторов для манипуляции данными. С помощью этих операторов мы можем добавлять, изменять, удалять и выгружать данные из базы, то есть манипулировать ими.

В эту группу входят самые распространенные операторы языка SQL:
+ `SELECT` – осуществляет выборку данных
+ `INSERT` – добавляет новые данные
+ `UPDATE` – изменяет существующие данные
+ `DELETE` – удаляет данные

Чаще всего программистам приходится работать именно с операторами группы DML.

### DCL – Data Control Language

**Data Control Language (DCL)** – группа операторов определения доступа к данным. Иными словами, это операторы для управления разрешениями. С их помощью мы можем разрешать или запрещать выполнение определенных операций над объектами базы данных.

Сюда входят:
+ `GRANT` – предоставляет пользователю или группе пользователей разрешения на определенные операции с объектом
+ `REVOKE` – отзывает выданные разрешения
+ `DENY`– задает запрет, имеющий приоритет над разрешением

### TCL – Transaction Control Language

**Transaction Control Language (TCL)** – группа операторов для управления транзакциями. Транзакция – это команда или блок команд, которые выполняются как единое целое. Если транзакция выполнена успешно, все модификации данных, сделанные в течение транзакции, принимаются и становятся постоянной частью базы данных. Если в результате выполнения транзакции происходит ошибка, все выполненные модификации данных будут отменены.

Группа операторов TCL предназначена для реализации и управления транзакциями. Сюда можно отнести:

+ `BEGIN TRANSACTION` – служит для определения начала транзакции
+ `COMMIT TRANSACTION` – применяет транзакцию
+ `ROLLBACK TRANSACTION` – откатывает все изменения, сделанные в контексте текущей транзакции
+ `SAVE TRANSACTION` – устанавливает промежуточную точку сохранения внутри транзакции

<hr>

[Содержание](#содержание)

# Примечания 5

**Примечание 1.** В настоящее время оператор `SELECT` выделяют в отдельную группу DQL – Data Query Language. Эта группа операторов для выполнения запросов по извлечению данных из таблиц состоит из единственного оператора — `SELECT`.

**Примечание 2.** Подробнее о подмножествах SQL можно почитать по [ссылке](https://info-comp.ru/what-is-ddl-dml-dcl-tcl) и [ссылке](https://www.geeksforgeeks.org/sql-ddl-dql-dml-dcl-tcl-commands/).

<hr>

[Содержание](#содержание)